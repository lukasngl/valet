apiVersion: v1
kind: Secret
metadata:
  name: my-app-credentials
  annotations:
    # Required: marks this secret as managed by the operator
    secret-manager.ngl.cx/managed: "true"
    # Required: which adapter to use
    secret-manager.ngl.cx/type: "azure"

    # Azure adapter configuration:
    # Required: Azure AD application Object ID (NOT the Client/Application ID!)
    # Find this in Azure Portal > App registrations > Your app > Overview > Object ID
    azure.secret-manager.ngl.cx/object-id: "00000000-0000-0000-0000-000000000000"
    # Optional: how long the secret should be valid (default: 90 days / 2160h)
    azure.secret-manager.ngl.cx/validity: "2160h"

    # Output mapping (which keys to write to .data):
    # Only fields with -target annotations will be included
    azure.secret-manager.ngl.cx/client-id-target: "/data/AZURE_CLIENT_ID"
    azure.secret-manager.ngl.cx/client-secret-target: "/data/AZURE_CLIENT_SECRET"
    # azure.secret-manager.ngl.cx/tenant-id-target: "/data/AZURE_TENANT_ID"

    # Status annotations (set by operator):
    # secret-manager.ngl.cx/status: "ready"
    # secret-manager.ngl.cx/provisioned-at: "2025-01-06T12:00:00Z"
    # secret-manager.ngl.cx/valid-until: "2025-04-06T12:00:00Z"
type: Opaque
# Data populated by operator based on *-target annotations:
# data:
#   AZURE_CLIENT_ID: <base64>
#   AZURE_CLIENT_SECRET: <base64>
